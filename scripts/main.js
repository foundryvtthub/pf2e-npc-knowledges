(()=>{"use strict";let e="";function t(...t){return t=t.filter((e=>"string"==typeof e)),`modules/${e}/templates/${t.join("/")}`}function n(t,n,i){return t.getFlag(e,n)??i}function i(t,n,i){return t.setFlag(e,n,i)}function o(e,t,n,i){const o="string"==typeof t?t:"info",c="object"==typeof t?t:"object"==typeof n?n:void 0,a="boolean"==typeof t?t:"boolean"==typeof n?n:i??!1;ui.notifications.notify(r(e,c),o,{permanent:a})}function r(...t){let[n,i]=t;return n=`${e}.${n}`,i?game.i18n.format(n,i):game.i18n.localize(n)}function c(t){const n=(...e)=>r(`${t}.${e[0]}`,e[1]);return Object.defineProperties(n,{warn:{value:(...e)=>function(...e){const[t,n,i]=e;o(t,"warning",n,i)}(`${t}.${e[0]}`,e[1],e[2]),enumerable:!1,configurable:!1},info:{value:(...e)=>function(...e){const[t,n,i]=e;o(t,"info",n,i)}(`${t}.${e[0]}`,e[1],e[2]),enumerable:!1,configurable:!1},error:{value:(...e)=>function(...e){const[t,n,i]=e;o(t,"error",n,i)}(`${t}.${e[0]}`,e[1],e[2]),enumerable:!1,configurable:!1},has:{value:n=>function(t){return game.i18n.has(`${e}.${t}`,!1)}(`${t}.${n}`),enumerable:!1,configurable:!1},path:{value:n=>function(t){return`${e}.${t}`}(`${t}.${n}`),enumerable:!1,configurable:!1}}),n}class EditLores extends FormApplication{constructor(e,t={}){super(e,{...t,id:`npc-edit-lores-${e.id}`})}static get defaultOptions(){return mergeObject(super.defaultOptions,{title:"Edit Lores",template:t("edit-lores.hbs"),width:400})}getData(e){const t=this.object;return mergeObject(super.getData(e),{unspecified:n(t,"unspecified")??"",specific:n(t,"specific")??"",i18n:c("templates.editLore")})}async _updateObject(e,{unspecified:t,specific:n}){const o=this.object;i(o,"unspecified",t.trim()),i(o,"specific",n.trim())}activateListeners(e){e.find("button.cancel").on("click",this.#e.bind(this))}#e(e){e.preventDefault(),this.close()}}function a(e,t){const i=e.actor;!function(e,t){const i=n(e,"unspecified"),o=n(e,"specific");i&&u(t,i,".unspecified-lore"),o&&u(t,o,".specific-lore")}(i,t),s(t,"header","button").before('<button type="button" class="breakdown edit">Edit</button>'),function(e,t){s(t,"header","button.edit").on("click",(()=>function(e){new EditLores(e).render(!0)}(e)))}(i,t)}function s(e,t,n){return e.find(`[data-tab="main"] .recall-knowledge ${"header"===t?".section-header":".section-body"} ${n}`)}function u(e,t,n){const i=s(e,"body",n),o=i.attr("title"),r=i.attr("class"),c=i.text().replace("\n","").trim().replace(/^.+? (\d+.+)$/,"$1"),a=t.split(",").filter((e=>e.trim())).map((e=>{return`<div class="${r}" title="${o}">${t=e.trim(),t?t[0].toUpperCase()+t.slice(1):""} ${c}</div>`;var t})).join("");i.replaceWith(a)}e||(e="pf2e-npc-knowledges"),Hooks.once("ready",(()=>{game.user.isGM&&Hooks.on("renderNPCSheetPF2e",a)}))})();
//# sourceMappingURL=main.js.map